<div class="container mx-auto px-4 py-8">
  <div class="flex flex-col md:flex-row justify-between items-center mb-8">
    <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-4 md:mb-0">Travel Community</h1>
    <button *ngIf="authService.isAuthenticated()" 
            routerLink="/community/create"
            class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition duration-200">
      Share Your Story
    </button>
  </div>

  <!-- Search Bar -->
  <div class="mb-8">
    <div class="relative">
      <input type="text" 
             [(ngModel)]="searchQuery"
             (keyup.enter)="onSearch()"
             placeholder="Search stories..."
             class="w-full px-4 py-3 pr-12 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-700 dark:text-white">
      <button (click)="onSearch()" 
              class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-blue-600 dark:text-gray-400">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="flex justify-center items-center py-12">
    <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
  </div>

  <!-- Posts Grid -->
  <div *ngIf="!loading && posts.length > 0" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <app-post-card *ngFor="let post of posts" [post]="post"></app-post-card>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && posts.length === 0" class="text-center py-12">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <h3 class="mt-4 text-lg font-medium text-gray-900 dark:text-white">No stories found</h3>
    <p class="mt-1 text-gray-500 dark:text-gray-400">Be the first to share your travel story!</p>
    <div class="mt-6" *ngIf="authService.isAuthenticated()">
      <a routerLink="/community/create" 
         class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
        Create Post
      </a>
    </div>
  </div>

  <!-- Pagination -->
  <div *ngIf="totalPages > 1" class="flex justify-center mt-8">
    <nav class="inline-flex rounded-md shadow">
      <button *ngFor="let page of Array(totalPages).keys()" 
              (click)="onPageChange(page + 1)"
              [class.bg-blue-600]="(page + 1) === currentPage"
              [class.text-white]="(page + 1) === currentPage"
              [class.bg-white]="(page + 1) !== currentPage"
              [class.text-gray-700]="(page + 1) !== currentPage"
              class="px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md mx-1 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none">
        {{ page + 1 }}
      </button>
    </nav>
  </div>
</div>
